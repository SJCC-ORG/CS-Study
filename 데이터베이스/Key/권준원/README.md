# 키(key)

## 🔑 키

- 키는 테이블에서 특정 로우(row)를 식별할 때 사용하는 속성 혹은 속성의 집합이다.
    - 테이블은 중복된 로우를 허용하지 않으므로 각 로우의 속성들 중 하나는 값이 달라야 한다.
    - 키가 되는 속성은 반드시 값이 달라서 로우를 구별할 수 있어야 한다.
- 키는 테이블 간의 관계를 맺는 데도 사용된다.
    - 외래키 참조

## 🛍 키의 종류

### 슈퍼키

- 슈퍼키는 로우를 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합이다.
- 로우를 유일하게 식별할 수 있는 값이면 모두 슈퍼키가 될 수 있다.
    - 고객의 주민번호, 전화번호, 고객번호 등등
- 슈퍼키는 포함하지 않아도 되는 속성을 포함할 수 있다.
    - [주민번호], [주민번호, 나이], [주민번호, 나이, 성별] 모두 슈퍼키가 될 수 있다.

### 후보키

- 후보키는 로우를 유일하게 식별할 수 있는 속성의 최소 집합이다.
- 우리가 일반적으로 부르는 키가 후보키이다.
- 후보키는 효율성 측면에서 매우 중요하다.
    - 최소 집합만 비교하면 되므로
- 위의 예에서 [주민번호], [고객번호]는 후보키이다.
    - [주민번호, 나이]는 슈퍼키이지만 후보키는 될 수 없다.

### 기본키

- 기본키는 여러 후보키 중 하나를 선정하여 대표로 삼는 키이다.
- 기본키 제약 조건
    - 테이블 내 로우를 식별할 수 있는 고유한 값을 가져야 한다.
    - NULL 값을 허용하지 않는다.
    - 키 값의 변동이 일어나지 않아야 한다.
    - 최대한 적은 수의 속성을 가진 것이어야 한다.(효율성)
    - 향후 키를 사용하는 데 있어 문제가 발생하지 않아야 한다.(주민번호와 같은 개인정보 문제)

### 대리키

- 마땅한 기본키가 없을 때 기본키로 사용하기 위해 만드는 가상의 키를 대리키라고 한다.
    - 일련번호, 우리가 자주 사용하는 identifier
- 인조키라고도 한다.
- 사용자가 직관적으로 그 값의 의미를 알 수 없다.

### 대체키

- 기본키로 선정되지 않은 후보키를 대체키라고 한다.
    - [주민번호], [고객번호] 중 [고객번호]를 기본키로 정하면 [주민번호]는 대체키가 된다.

### 외래키

- 외래키는 다른 테이블의 기본키를 참조하는 속성을 말한다.
    - RDBMS의 특징인 테이블 간의 관계를 표현한다.
- 참조하고(외래키) 참조되는(기본키) 테이블의 도메인은 같아야 한다.
- 참조되는(기본키) 값이 변경되면 참조하는(외래키) 값도 변경된다.
- NULL 값과 중복 값이 허용된다.
- 자기 자신의 기본키를 참조하는 외래키도 가능하다.
    - 부모-자식 관계?
- 외래키가 기본키의 일부가 될 수 있다.
    - 외래키를 기본키로 포함하여 복합 기본키로 사용하는 경우